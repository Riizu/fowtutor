<div class="container">
    <h2><%= @decklist.name %></h2>
    <h4>Created on: <%= @decklist.created_at %></h4>
    <h4>Cards Needed: 
        
    <% if @cards_needed.length > 0 %>
        </h4>
        <ul>
            <% @cards_needed.each do |card, amount| %>
                <li>(<%= amount %>) <%= link_to(card.name, card_path(card)) %></li>
            <% end %>
        </ul>
    <% else %>
        None!</h4>
    <% end %>
    
    <div class="row">
        <div class="col-md-12">
            <% if @decklist.decks.length != 0 %>
                <h4>
                    <% @ruler_deck.cards.each do |card| %>
                        <%= link_to(card.name, card_path(card)) %> <br> 
                    <% end %>
                </h4>
            <% end %>
        </div>
    </div>

    <div class="row">
        <div class="col-md-8">
            <div class="row">
                <div class="col-md-12">
                    <div class="row">
                        <% if @decklist.decks.length != 0 %>
                            <% @decks.each_with_index do |deck, i| %>
                                <% if i % 3 == 0 %>
                                    </div>
                                    <div class="row">
                                <% end %>
                                <div class="col-md-6" %>
                                    <div>
                                        <%= deck.name %>(<%= deck.cards.count %>)
                                        <hr>
                                    </div>
                                    <% deck.sort_by_card_type.each do |card_type, hash_data| %>
                                        <div>
                                            <%= card_type %> (<%= hash_data["count"] %>)
                                            
                                            <% hash_data["cards"].each do |card, number| %>
                                                <div>
                                                    <%= link_to("(#{number}) " + card.name, card_path(card)) %>
                                                </div>
                                            <% end %>
                                        </div>
                                    <% end %>
                                </div>
                            <% end %>
                        <% end %>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-md-4">
            <%= @decklist.user.username %>
            <hr>
            <%= @decklist.description %>
        </div>
    </div>

    <%= render "comments/comments", commentable: @decklist %>
</div>
